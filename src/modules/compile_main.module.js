function compile_main_module(slextModule, tabModule) {
	var self = this;

	$(document).on("click", 'a[ng-click="switchToFlatLayout()"]', function() {
		self.addButton();
	});
	$(document).on("click", 'a[ng-click="switchToSideBySideLayout()"]', function() {
		self.addButton();
	});

	this.addButton = function() {
		$(".log-btn").before("<a href='#' class='sl-compile-main btn btn-info'>Compile main</a>");
	}

	this.addButton();
	$(document).on("click", ".sl-compile-main", function() {
		var pdfOpen = slextModule.isFullScreenPdf();
		var currentTab = $(".sl-tab-active");
	    var mainFile = $(".sl-tab-mainfile");

	    if (mainFile.length != 1) {
	        alert("Choose a main file with alt-m");
	        return;
	    }

	    mainFile.click();
	    setTimeout(function() {
	        $("a[ng-click='recompile()']").click();
	        currentTab.click();
	        setTimeout(function() {
	        	if (pdfOpen) slextModule.goToFullScreenPdf();
	        }, 500);
	    }, 500);
	});


    $(window).keydown(function(event) {
        if(event.altKey && event.keyCode == 13) { /* enter */
            event.preventDefault();
            $('.sl-compile-main').click();
        }
    });
}

